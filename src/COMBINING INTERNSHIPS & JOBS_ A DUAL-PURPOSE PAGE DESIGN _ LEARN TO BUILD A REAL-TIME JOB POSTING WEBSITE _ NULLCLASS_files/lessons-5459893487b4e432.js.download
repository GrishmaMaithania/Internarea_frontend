(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5021],{21448:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/[courseId]/lessons",function(){return t(30533)}])},30533:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return lessons}});var l=t(85893),r=t(72747),n=t(67294),o=t(11163),a=t(70231);function LessonList(e){let{lessons:s,onSelected:t,courseId:r,categories:o,courseProgress:i,handleCourseUpdate:d}=e,[c,u]=(0,n.useState)(!1),[m,h]=(0,n.useState)([]);return(0,n.useEffect)(()=>{o.length&&u(o[0]._id)},[o]),(0,n.useEffect)(()=>{var e;let s=null==i?void 0:null===(e=i.completedLessons)||void 0===e?void 0:e.map(e=>e.toString());h(s)},[i]),(0,l.jsx)("section",{children:(0,l.jsx)("div",{className:"divide-y",children:o.length?o.sort((e,s)=>e.sortid-s.sortid).map(e=>(0,l.jsxs)("details",{className:"transition-all divide-y duration-300",children:[(0,l.jsxs)("summary",{className:"cursor-pointer my-2 rounded-lg flex items-center justify-between p-4",onClick:()=>u(c!==e._id&&e._id),children:[(0,l.jsx)("span",{className:"text-lg font-semibold",children:e.name}),c===e._id?(0,l.jsx)(a.IkZ,{}):(0,l.jsx)(a.qL$,{})]}),(0,l.jsx)("div",{children:(0,l.jsx)("ul",{className:"divide-y max-h-screen overflow-y-scroll capitalize",children:s.filter(s=>s.category._id===e._id).sort((e,s)=>e.sortid-s.sortid).map((e,s)=>(0,l.jsx)("li",{className:"py-4 px-2 flex items-center justify-between transition-all duration-300 ".concat((null==m?void 0:m.includes(e._id))?"bg-green-100":""," cursor-pointer"),children:(0,l.jsxs)("div",{onClick:()=>{t(e)},className:"flex-1 flex items-center",children:[(0,l.jsx)(a.KoQ,{className:"mx-2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-900 text-md md:text-lg",children:e.name}),(0,l.jsx)("h5",{className:"text-gray-600 lowercase",children:e.duration?"".concat(e.duration," mins"):"Unknown"}),(0,l.jsx)("div",{className:"flex",children:(null==m?void 0:m.includes(e._id))?(0,l.jsx)("em",{children:(0,l.jsx)("h3",{className:"mt-1",children:"Lesson Completed"})}):(0,l.jsx)("button",{onClick:()=>d(e._id),className:"text-xs bg-blue-500 text-white p-2 rounded mt-2",children:"Mark as Completed"})})]})]})},e._id+s))})})]},e._id)):null})})}var i=t(22004),components_VideoPlayer=e=>{let handleCourseUpdate=async()=>{};return(0,l.jsx)(l.Fragment,{children:(null==e?void 0:e.src)?(0,l.jsx)(i.Z,{url:null==e?void 0:e.src,loop:!1,controls:!0,width:"100%",onEnded:handleCourseUpdate}):(0,l.jsx)("p",{children:"Loading Video..."})})},d=t(58518),c=t(91444),u=t(53946),m=t(69417),h=t(45007),x=t(41664),p=t.n(x),v=t(96771),f=t.n(v),components_Loader=()=>(0,l.jsx)("div",{className:f().container,children:(0,l.jsx)("span",{className:f().loader})});function LinearProgressWithLabel(e){return(0,l.jsxs)("div",{className:"flex items-center justify-center text-center my-4",children:[(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("div",{className:"bg-green-400 h-3 rounded-full",children:(0,l.jsx)("div",{className:"w-3/4 h-full bg-green-600 rounded-full",style:{width:"".concat(Math.round(e.value),"%")}})})}),(0,l.jsx)("div",{className:"ml-2",children:(0,l.jsx)("p",{className:"font-bold text-sm",children:"".concat(Math.round(null==e?void 0:e.value),"%")})})]})}var lessons=()=>{let{query:e}=(0,o.useRouter)(),[s,t]=(0,n.useState)(null),[a,i]=(0,n.useState)(!0),[x,v]=(0,n.useState)([]),[f,j]=(0,n.useState)(null),[g,_]=(0,n.useState)(null),[y,N]=(0,n.useState)(null),w=(0,h.v9)(e=>e.profile.profile);if((0,n.useEffect)(()=>{if(f&&f.lessons.length){var s,l,r,n;let o=[];f.lessons.map(e=>{let s=e.category;return o.find(e=>e._id===s._id)||o.push(s),e}),v(o),t(null==f?void 0:null===(s=f.lessons)||void 0===s?void 0:s[0]),N({courseId:null==e?void 0:e.courseId,lessonId:null==f?void 0:null===(r=f.lessons)||void 0===r?void 0:null===(l=r[0])||void 0===l?void 0:l._id,totalLesson:null==f?void 0:null===(n=f.lessons)||void 0===n?void 0:n.length})}else v([])},[f]),(0,n.useEffect)(()=>{if(0==Object.keys(e).length)return;i(!1);let s="client/course/"+e.courseId;d.Z.get(s).then(e=>{j(e.data)})},[e]),(0,n.useEffect)(()=>{d.Z.post("/profile/getCourseStatus/"+e.courseId,{uid:null==w?void 0:w.uid}).then(e=>{var s;(null===(s=e.data)||void 0===s?void 0:s.status)&&_(null==e?void 0:e.data)})},[w,e]),a)return(0,l.jsx)(components_Loader,{});let handleCourseUpdate=async s=>{var t;let l={courseId:e.courseId,lessonId:s,totalLesson:null==f?void 0:null===(t=f.lessons)||void 0===t?void 0:t.length},r=await d.Z.update("/profile/update-lesson-status",l);r.data.status?(_(e=>{let t=[...(null==e?void 0:e.completedLessons)||[],s],l=t.length/f.lessons.length*100;return{...e,completedLessons:t,progress:l}}),c.Am.success("Course Marked as Completed")):c.Am.error(r.data.err)};return(0,l.jsxs)(r.Z,{wantFooter:!1,children:[f&&(0,l.jsx)(u.Z,{title:"".concat(null==s?void 0:s.name.toUpperCase()," | ").concat(null==f?void 0:f.name.toUpperCase(),"| NULLCLASS")}),(0,l.jsxs)("div",{className:"flex w-full m-auto flex-col md:flex-row",children:[(0,l.jsxs)("div",{className:"w-full md:w-5/6",children:[(0,l.jsx)("h5",{className:"font-semibold text-xl md:text-2xl my-6 text-center capitalize",children:(null==s?void 0:s.name)||"No Lessons Selected"}),(0,l.jsx)("section",{className:"md:mt-4",children:(null==s?void 0:s.link)&&(0,l.jsx)(components_VideoPlayer,{src:(null==s?void 0:s.link)||"https://player.vimeo.com/video/786646692?h=f2ca1d6121",title:null==s?void 0:s.name,lessonData:y,courseProgress:g})}),(0,l.jsx)("h6",{className:"font-semibold text-xl md:text-2xl my-6 text-center capitalize",children:(null==s?void 0:s.sourcecode)&&(0,l.jsx)(m.Z,{onClick:()=>{window.open(null==s?void 0:s.sourcecode,"_blank")},children:"Download Source Code"})})]}),(0,l.jsxs)("div",{className:"md:w-1/2 rounded-md shadow-2xl m-3",children:[(0,l.jsxs)("div",{className:"p-3",children:[(0,l.jsx)("h5",{className:"text-xl font-bold md:text-2xl capitalize my-4 md:my-5",children:null==f?void 0:f.name}),(0,l.jsxs)("div",{children:[(null==g?void 0:g.progress)===100?(null==g?void 0:g.certificate)?(0,l.jsx)(p(),{href:"/certificates/".concat(g.certificate._id),target:"_blank",rel:"noopener noreferrer",children:(0,l.jsx)("h2",{className:"text-sm text-gray-400 bg-grey-100 rounded-md px-2 py-1",children:"View Certificate"})}):(0,l.jsx)("button",{onClick:()=>{let s={name:f.name,courses:e.courseId,user:null==w?void 0:w._id};d.Z.post("certificates",s).then(e=>{var s,t;(null===(s=e.data)||void 0===s?void 0:s.status)?c.Am.success("Certificate Generated"):c.Am.error(null===(t=e.data)||void 0===t?void 0:t.err)}).catch()},className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Request Certificate"}):(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Complete the course to unlock certificate"}),(0,l.jsx)(LinearProgressWithLabel,{value:(null==g?void 0:g.progress)||0})]})]}),(0,l.jsx)(LessonList,{lessons:(null==f?void 0:f.lessons)||[],categories:x,courseProgress:g,courseId:null==e?void 0:e.courseId,onSelected:e=>{t(e)},handleCourseUpdate:handleCourseUpdate})]})]})]})}},58518:function(e,s,t){"use strict";var l=t(5121),r=t(93345),n=t(93791),o=t(91444),a=t(47e3),i=t(11163),d=t.n(i);l.Z.defaults.baseURL=r.z0,l.Z.interceptors.response.use(e=>e,e=>{if(!e.response||401!==e.response.status&&403!==e.response.status)return Promise.reject(e);(0,n.kT)("token"),o.Am.error("Session Expired Please Login Again"),(0,a.Z)(),d().push("/login")});let getToken=e=>(0,n.ej)("token",e),c={data:null,error:{message:"Need Login"}},successRes=e=>({data:e,error:null}),errorRes=e=>({data:null,error:e}),get=async(e,s,t,r)=>{try{let n=getToken(t);if(n||r){let t=await l.Z.get(e,{headers:{authorization:"Bearer "+n,...s}});return successRes(t.data)}return c}catch(e){return errorRes(e)}},post=async(e,s,t,r,n)=>{try{let o=getToken(r);if(o||n){let r=await l.Z.post(e,s,{headers:{authorization:"Bearer "+o,...t}});return successRes(r.data)}return c}catch(e){return errorRes(e)}},patch=async(e,s,t,r)=>{try{let n=getToken(r);if(n){let r=await l.Z.patch(e,s,{headers:{authorization:"Bearer "+n,...t}});return successRes(r.data)}return c}catch(e){return errorRes(e)}},update=async(e,s,t,r)=>{try{let n=getToken(r);if(n){let r=await l.Z.put(e,s,{headers:{authorization:"Bearer "+n,...t}});return successRes(r.data)}return c}catch(e){return errorRes(e)}},remove=async(e,s,t,r)=>{try{let n=getToken(t);if(n||r){let t=await l.Z.delete(e,{headers:{authorization:"Bearer "+n,...s}});return successRes(t.data)}return c}catch(e){return errorRes(e)}};s.Z={get,post,patch,update,remove}},96771:function(e){e.exports={container:"loader_container___sZyJ",loader:"loader_loader__h6F1S",rotation:"loader_rotation__4ehnc"}}},function(e){e.O(0,[1778,8717,5675,5615,3615,9417,1664,5720,8166,2747,9774,2888,179],function(){return e(e.s=21448)}),_N_E=e.O()}]);