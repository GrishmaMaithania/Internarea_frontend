(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{73700:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(68930)}])},68930:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return login}});var i=a(85893),o=a(80822),r=a(63366),n=a(87462),s=a(67294),l=a(90512),d=a(94780),c=a(41796),u=a(98216),h=a(11496),p=a(72021),m=a(74423),g=a(47739),v=a(1588),x=a(34867);function getSwitchBaseUtilityClass(e){return(0,x.Z)("PrivateSwitchBase",e)}(0,v.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);let Z=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],useUtilityClasses=e=>{let{classes:t,checked:a,disabled:i,edge:o}=e,r={root:["root",a&&"checked",i&&"disabled",o&&`edge${(0,u.Z)(o)}`],input:["input"]};return(0,d.Z)(r,getSwitchBaseUtilityClass,t)},f=(0,h.ZP)(g.Z)(({ownerState:e})=>(0,n.Z)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12})),b=(0,h.ZP)("input",{shouldForwardProp:h.FO})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),k=s.forwardRef(function(e,t){let{autoFocus:a,checked:o,checkedIcon:s,className:d,defaultChecked:c,disabled:u,disableFocusRipple:h=!1,edge:g=!1,icon:v,id:x,inputProps:k,inputRef:w,name:C,onBlur:j,onChange:y,onFocus:S,readOnly:_,required:z=!1,tabIndex:I,type:P,value:F}=e,R=(0,r.Z)(e,Z),[B,L]=(0,p.Z)({controlled:o,default:!!c,name:"SwitchBase",state:"checked"}),E=(0,m.Z)(),N=u;E&&void 0===N&&(N=E.disabled);let $="checkbox"===P||"radio"===P,q=(0,n.Z)({},e,{checked:B,disabled:N,disableFocusRipple:h,edge:g}),U=useUtilityClasses(q);return(0,i.jsxs)(f,(0,n.Z)({component:"span",className:(0,l.Z)(U.root,d),centerRipple:!0,focusRipple:!h,disabled:N,tabIndex:null,role:void 0,onFocus:e=>{S&&S(e),E&&E.onFocus&&E.onFocus(e)},onBlur:e=>{j&&j(e),E&&E.onBlur&&E.onBlur(e)},ownerState:q,ref:t},R,{children:[(0,i.jsx)(b,(0,n.Z)({autoFocus:a,checked:o,defaultChecked:c,className:U.input,disabled:N,id:$?x:void 0,name:C,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;let t=e.target.checked;L(t),y&&y(e,t)},readOnly:_,ref:w,required:z,ownerState:q,tabIndex:I,type:P},"checkbox"===P&&void 0===F?{}:{value:F},k)),B?s:v]}))});var w=a(88169),C=(0,w.Z)((0,i.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),j=(0,w.Z)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),y=(0,w.Z)((0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),S=a(27623);function getCheckboxUtilityClass(e){return(0,x.Z)("MuiCheckbox",e)}let _=(0,v.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),z=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Checkbox_useUtilityClasses=e=>{let{classes:t,indeterminate:a,color:i,size:o}=e,r={root:["root",a&&"indeterminate",`color${(0,u.Z)(i)}`,`size${(0,u.Z)(o)}`]},s=(0,d.Z)(r,getCheckboxUtilityClass,t);return(0,n.Z)({},t,s)},I=(0,h.ZP)(k,{shouldForwardProp:e=>(0,h.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,t[`size${(0,u.Z)(a.size)}`],"default"!==a.color&&t[`color${(0,u.Z)(a.color)}`]]}})(({theme:e,ownerState:t})=>(0,n.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,c.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${_.checked}, &.${_.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${_.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),P=(0,i.jsx)(j,{}),F=(0,i.jsx)(C,{}),R=(0,i.jsx)(y,{}),B=s.forwardRef(function(e,t){var a,o;let d=(0,S.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:c=P,color:u="primary",icon:h=F,indeterminate:p=!1,indeterminateIcon:m=R,inputProps:g,size:v="medium",className:x}=d,Z=(0,r.Z)(d,z),f=p?m:h,b=p?m:c,k=(0,n.Z)({},d,{color:u,indeterminate:p,size:v}),w=Checkbox_useUtilityClasses(k);return(0,i.jsx)(I,(0,n.Z)({type:"checkbox",inputProps:(0,n.Z)({"data-indeterminate":p},g),icon:s.cloneElement(f,{fontSize:null!=(a=f.props.fontSize)?a:v}),checkedIcon:s.cloneElement(b,{fontSize:null!=(o=b.props.fontSize)?o:v}),ownerState:k,ref:t,className:(0,l.Z)(w.root,x)},Z,{classes:w}))});var L=a(15861),E=a(23795),N=a(10781),$=a(49300),q=a(62173),U=a(32488),O=a(82175),V=a(86704),A=a(2525),M=a(94532),H=a(18842),T=a(11163),X=a(33837),W=a(55074),Y=a(96841),D=a(53946),K=a(15985),G=a(93791),J=a(45007),Q=a(91444),ee=a(41935),et=a(41296),ea=a(31578),ei=a(74231),eo=a(98691),er=a(58518),en=a(5121);let useLogin=()=>{let[e,t]=(0,s.useState)(""),[a,i]=(0,s.useState)(!1),o=(0,J.I0)(),r=(0,T.useRouter)(),n=ei.Ry().shape({email:ei.Z_().email("Invalid email!").required("Username is required!"),password:ei.Z_().required("Password is required!").matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/,"Password must conatin one uppercase, lowercase, special symbol and number."),recaptcha:ei.Z_().required("ReCaptcha is required")}),onSubmit=async t=>{let{email:a,password:n}=t;i(!0);let s=await en.Z.post("/captcha/verify",{token:e});if(!s.data.success){Q.Am.error("Captcha is not verified, Please relaod page and try again"),i(!1);return}(0,K.o5)(a,n,async(e,t)=>{if(e&&(Q.Am.error(e),i(!1)),!e&&t.uid)try{let e=await(0,ea.a)("/profile");if(e&&e.data&&e.data.isVerified){var a,n,s;(0,G.Vn)("cart",e.data.cartId._id),er.Z.get("client/cart").then(e=>{var t,a;(null===(t=e.data)||void 0===t?void 0:t._id)&&(o((0,eo.TV)(e.data._id)),(null===(a=e.data)||void 0===a?void 0:a.items.length)&&e.data.items.forEach(e=>{o((0,eo.Xq)({courseId:e._id,name:e.name,price:e.price}))}))});let t={email:null===(a=e.data)||void 0===a?void 0:a.email,name:null===(n=e.data)||void 0===n?void 0:n.name,uid:null===(s=e.data)||void 0===s?void 0:s.uid};o((0,ee.av)(t)),o((0,et.In)(e.data)),Q.Am.success("Logged In Successfully"),r.push("/"),i(!1)}else(0,K.o0)(o),i(!1)}catch(e){(0,K.o0)(o),i(!1),Q.Am.error("Failed to fetch user data: "+e.message)}})};return{loginSchema:n,onSubmit,handleLogout:()=>{(0,K.o0)(o)},setCaptchaToken:t,isLoading:a}};var login=()=>{let{loginSchema:e,onSubmit:t,handleLogout:a,setCaptchaToken:r,isLoading:n}=useLogin(),l=(0,T.useRouter)(),d=(0,G.YW)(),[c,u]=(0,s.useState)("password");(0,s.useEffect)(()=>{console.log(d),d?l.replace("/"):a()},[d]);let{values:h,isSubmitting:p,touched:m,errors:g,handleSubmit:v,handleChange:x,setFieldValue:Z}=(0,O.TA)({initialValues:{email:"",password:"",recaptcha:""},validationSchema:e,onSubmit:t});return(0,i.jsx)(N.Z,{title:"Login",image:"images/login/login-banner.png",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.Z,{title:"Log In to Your Account | NullClass",description:"Log into NullClass and immerse yourself in real-world projects. Enhance your expertise with practical, real-time educational experiences."}),(0,i.jsx)(q.Z,{onSubmit:v,children:(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(V.X6,{children:"Log in"}),(0,i.jsx)(U.Z,{id:"email",name:"email",label:"Email",type:"text",value:h.email,touched:m.email,error:null==g?void 0:g.email,onChange:x}),(0,i.jsxs)(V.yH,{children:[(0,i.jsx)(U.Z,{id:"password",name:"password",label:"Password",type:c,value:h.password,touched:m.password,error:null==g?void 0:g.password,onChange:x}),(0,i.jsx)(V.Wf,{children:"password"===c?(0,i.jsx)(A.Z,{onClick:()=>{u("text")}}):(0,i.jsx)(M.Z,{onClick:()=>{u("password")}})})]}),(0,i.jsx)(W.Z,{setFieldValue:Z,setCaptchaToken:r}),(0,i.jsx)(X.BD,{children:(null==m?void 0:m.recaptcha)&&(null==g?void 0:g.recaptcha)}),(0,i.jsx)($.Z,{variant:"outlined",title:n?"Logging In...":"Log In",type:"submit",isLoading:n}),(0,i.jsxs)(V.P2,{children:[(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(B,{sx:{padding:"0",marginRight:"8px"}}),(0,i.jsx)(L.Z,{children:"Keep me logged in"})]}),(0,i.jsx)(L.Z,{children:(0,i.jsx)(E.Z,{href:"/forgot-password",sx:{fontWeight:"600",color:"#3563B8"},children:"Forgot login or password?"})})]}),(0,i.jsx)(H.Z,{title:"or"}),(0,i.jsx)(V.us,{children:(0,i.jsx)(Y.Z,{})}),(0,i.jsx)(H.Z,{title:"don't have an account?"}),(0,i.jsx)($.Z,{onClick:()=>{l.push("/register")},variant:"outlined",title:"Sign Up"})]})})]})})}}},function(e){e.O(0,[8717,5675,5615,3615,9417,8288,6705,129,7383,8808,9774,2888,179],function(){return e(e.s=73700)}),_N_E=e.O()}]);