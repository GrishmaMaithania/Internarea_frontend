(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9190],{54476:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return r(70800)}])},49300:function(e,t,r){"use strict";r.d(t,{Z:function(){return components_Button}});var n=r(85893),a=r(98456),o=r(69417),s=r(16829);let i=(0,s.Z)(o.Z)(()=>({borderRadius:"5px",color:"gray",padding:"10.5px 14px",margin:"15px 0",textTransform:"capitalize",fontWeight:"700",fontSize:"1rem",boxSizing:"border-box","&:hover":{boxShadow:"3px 2px 4px #ccc"}}));var components_Button=e=>{let{title:t,type:r="button",isLoading:o,variant:s,onClick:l,disabled:c,style:d}=e;return(0,n.jsxs)(i,{disabled:c,variant:s,fullWidth:!0,type:r,onClick:l,style:d,children:[o&&(0,n.jsx)(a.Z,{size:20,className:"mr-3",color:"warning"}),t]})}},94652:function(e,t,r){"use strict";r.d(t,{Z:function(){return components_DashboardButton}});var n=r(85893);r(67294);var a=r(69417),o=r(16829);let s=(0,o.Z)(a.Z)(()=>({display:"inline-block",width:"100%",maxWidth:"fit-content",padding:"10px 24px",textTransform:"capitalize",transition:"all 0.6s ease","& a":{boxShadow:"none",textDecoration:"none",fontSize:"14px",fontWeight:"600",zIndex:"-1111"}}));var components_DashboardButton=e=>{let{variant:t,value:r,onClick:a,disabled:o=!1}=e;return(0,n.jsx)(s,{variant:t,onClick:a,disabled:o,children:r})}},46554:function(e,t,r){"use strict";r.d(t,{Z:function(){return userFetch}});var n=r(67294),a=r(45007),o=r(41935);r(58518);var s=r(31578),i=r(70436),l=r(98691),c=r(41296),d=r(11163),userFetch=()=>{let e=(0,d.useRouter)(),t=(0,a.I0)(),r=(0,a.v9)(e=>e.loggedUser.profile),u=(0,a.v9)(e=>e.profile.profile);(0,n.useEffect)(()=>{if(r&&r.uid){if(!u||0==Object.keys(u).length){let fetchUserData=async()=>{try{let e=await void(0,s.a)("/profile").then(e=>(i.a.setState(t=>({...t,user:e.data})),e.data)).catch(e=>(i.a.setState({user:null}),null));if(null!==e)t((0,c.In)(e));else throw Error("Failed to fetch user data")}catch(e){console.error(e)}};fetchUserData()}}else t((0,o.pn)()),t((0,l.wM)()),t((0,c.FZ)()),e.push("/login")},[r,u,t,e]);let{status:h,profile:p,error:x}=(0,a.v9)(e=>e.profile);return{profile:p,status:h,error:x}}},70800:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return cart}});var n=r(85893),a=r(72747),o=r(67294),s=r(86886),i=r(7906),l=r(53184),c=r(68509),d=r(53252),u=r(295),h=r(80822),p=r(16829),x=r(69417);let f=(0,p.Z)(h.Z)(()=>({padding:"40px 20px","@media(max-width: 991px)":{padding:"20px 10px"},minHeight:"calc(100vh - 402px)"})),g=(0,p.Z)(h.Z)(()=>({"& p":{fontSize:"14px",color:"#fca311"},"& .MuiGrid-container":{marginTop:"20px"},"thead th":{fontSize:"16px",fontWeight:"600"}})),m=(0,p.Z)(h.Z)(()=>({display:"flex",alignItems:"center",gap:"20px",marginTop:"20px","& input":{padding:"12px"},"& button":{background:"#12213D",fontWeight:"600","&:hover":{color:"#14231D"},"@media(max-width: 1030px)":{padding:"12px"}}}));(0,p.Z)(h.Z)(()=>({display:"flex",alignItems:"center",gap:"40px","@media(max-width: 600px)":{justifyContent:" center"},"& button":{background:"#12213D",fontWeight:"600","&:hover":{color:"#14231D"},"@media(max-width: 1030px)":{padding:"12px"}}}));let Z=(0,p.Z)(h.Z)(()=>({display:"flex",flexDirection:"column",gap:"15px",border:"1px solid rgba(224, 224, 224, 1)",padding:"20px",borderRadius:"5px","& h4":{margin:0,padding:"0 0 10px",fontSize:"16px",fontWeight:"600",borderBottom:"1px solid rgba(224, 224, 224, 1)",color:"#fca311"},"& div":{display:"flex",alignItems:"center",justifyContent:"space-between","& h5":{fontSize:"16px",fontWeight:"600"},"& p":{fontSize:"16px",color:"#fca311"},"& h6":{fontSize:"16px",color:"#fca311",fontWeight:"600"}},"& button":{background:"#12213D",color:"#fff"},"&:hover":{"& button":{background:"#fff",color:"#12213D"}}})),j=(0,p.Z)(x.Z)(()=>({marginTop:"20px",padding:"10px",width:"100%",maxWidth:"160px",fontWeight:"600",fill:"#12213d",background:"#12213d",color:"#fff","& svg":{marginLeft:"10px",color:"#fff",fill:"#fff"},"&:hover":{"& svg":{color:"#12213d",fill:"#12213d"}}}));var v=r(15861),C=r(63343),b=r(11163),y=r(78432),k=r(58518),I=r(49300),w=r(78262),S=r(91444),_=r(45007),z=r(26705),R=r(94652),Coupon=e=>{let{applyCoupon:t}=e,[r,a]=(0,o.useState)("");return(0,n.jsxs)(m,{children:[(0,n.jsx)(z.Z,{label:"Coupon Code",variant:"outlined",value:r,onChange:e=>a(e.target.value),fullWidth:!0}),(0,n.jsx)(R.Z,{variant:"contained",value:"Apply Coupon",disabled:""===r,onClick:()=>t(r)})]})},T=r(93791);let sumofItems=e=>{let t=0;return null==e||e.forEach(e=>{t+=null==e?void 0:e.price}),t};var Cart_Checkout=e=>{let{items:t}=e,r=(0,_.v9)(e=>e.cart),[a,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(""),p=(0,b.useRouter)(),x=(0,_.v9)(e=>e.loggedUser.profile),[f,g]=(0,o.useState)(""),[m,j]=(0,o.useState)(sumofItems(t)),[C,y]=(0,o.useState)(0),[z,R]=(0,o.useState)("");(0,o.useEffect)(()=>{0===r.items.length&&y(0)},[r.items]);let createOrder=async e=>{let r=t.map(e=>e.courseId);i(!0),k.Z.post("courses/buy",{courses:r,couponCode:e}).then(e=>{var t,r;i(!1),(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.short_url)&&(u(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.short_url),c(!0))}).catch(e=>{i(!1)})},handleOrder=e=>{createOrder(e)},W=(0,o.useCallback)(async e=>{try{g(e);let r=(0,T.YW)();if(r){let r=await k.Z.get("/coupons/code/".concat(e));if(null==r?void 0:r.data){let e=r.data;if(e.percentage){let r=parseFloat(e.percentage),n=sumofItems(t);if(isNaN(r)||isNaN(n))R("I");else{let e=r/100*n,a=Number(e.toFixed(2));y(a),R("A");let o=sumofItems(t);o-=e,j(o)}}}else R("I")}else S.Am.error("Log in required"),p.push("/login")}catch(e){console.error("Error applying coupon:",e)}},[f,t,x]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z,{children:[(0,n.jsx)(v.Z,{variant:"h4",children:"Cart Totals"}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(v.Z,{variant:"h5",children:"Subtotal"}),(0,n.jsxs)(v.Z,{children:["₹",sumofItems(t)]})]}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(v.Z,{variant:"h5",children:"Coupon Discount (-)"}),C>0?(0,n.jsxs)(v.Z,{children:["₹",C]}):(0,n.jsx)(v.Z,{children:"₹0"})]}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(v.Z,{variant:"h5",children:"Total"}),C>0?(0,n.jsxs)(v.Z,{variant:"h6",children:["₹",m.toFixed(2)]}):(0,n.jsxs)(v.Z,{variant:"h6",children:["₹",sumofItems(t).toFixed(2)]})]}),(0,n.jsx)(I.Z,{variant:"contained",title:"Proceed to checkout",isLoading:a,onClick:()=>x?handleOrder(f):p.push("/login")})]}),(0,n.jsx)(s.ZP,{container:!0,spacing:2,children:(0,n.jsxs)(s.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,n.jsx)(Coupon,{applyCoupon:W}),(0,n.jsx)(v.Z,{variant:"subtitle2",style:{color:"A"===z?"green":"I"===z?"red":"black"},children:"A"===z?"Coupon Valid":"I"===z?"Coupon Invalid":"Apply coupon to get discount"})]})}),(0,n.jsx)(w.Z,{open:l,maxWidth:"lg",fullWidth:!0,onClose:()=>c(!1),children:(0,n.jsx)("iframe",{style:{height:"85vh",width:"100%"},src:d,title:"Payment URL"})})]})},W=r(41687),P=r(93345),E=r(88078),CartItems_CartSkeltonCard=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{animation:"wave",height:15,style:{marginBottom:6}}),(0,n.jsx)(E.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:15}})]})},B=r(98691),D=r(53920),N=r(46554);let F=(0,D.ZP)(P.z0||"https://api-staging.nullclass.com");var cart=()=>{let e=(0,b.useRouter)(),t=(0,_.I0)(),[r,h]=(0,o.useState)(!1),p=(0,_.v9)(e=>e.loggedUser.profile),{profile:x,status:m,error:Z}=(0,N.Z)(),I=(0,T.YW)(),w=(0,_.v9)(e=>e.cart),[S,z]=(0,o.useState)(w.items||[]);(0,o.useEffect)(()=>{F.on("connect",()=>{});let r="cart-"+(null==x?void 0:x.razorpayId);return I&&F.on(r,r=>{t((0,B.wM)()),r.reload&&e.push("/projects")}),()=>{F.off("connect"),F.off(r)}},[p]),(0,o.useEffect)(()=>{z(w.items)},[w.items]),(0,o.useEffect)(()=>{k.Z.get("client/cart").then(e=>{var r,n;(null===(r=e.data)||void 0===r?void 0:r._id)&&(t((0,B.TV)(e.data._id)),(null===(n=e.data)||void 0===n?void 0:n.items.length)&&e.data.items.forEach(e=>{t((0,B.Xq)({courseId:e._id,name:e.name,price:e.price}))}))})},[t]);let removeItem=e=>{h(!0),k.Z.remove("client/cart?cart=".concat(w.cartId,"&courseId=").concat(e)).then(()=>{let r=S.filter(t=>t.courseId!==e);z(r),t((0,B.h2)(e)),h(!1)}).catch(e=>{h(!1)})};return(0,n.jsx)(a.Z,{children:(0,n.jsx)(y.u,{children:(0,n.jsx)(f,{children:(0,n.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:12,md:8,lg:8,children:(0,n.jsxs)(g,{children:[(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(l.Z,{style:{background:"#d9e1f2"},children:(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(d.Z,{}),(0,n.jsx)(d.Z,{children:"Product"}),(0,n.jsx)(d.Z,{children:"Price"}),(0,n.jsx)(d.Z,{children:"Total"})]})}),(0,n.jsxs)(u.Z,{children:[r&&(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(d.Z,{children:(0,n.jsx)(CartItems_CartSkeltonCard,{})}),(0,n.jsx)(d.Z,{children:(0,n.jsx)(CartItems_CartSkeltonCard,{})}),(0,n.jsx)(d.Z,{children:(0,n.jsx)(CartItems_CartSkeltonCard,{})}),(0,n.jsx)(d.Z,{children:(0,n.jsx)(CartItems_CartSkeltonCard,{})})]}),!r&&(null==S?void 0:S.length)?null==S?void 0:S.map(e=>(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(d.Z,{children:(0,n.jsx)(C.Z,{onClick:()=>removeItem(null==e?void 0:e.courseId)})}),(0,n.jsx)(d.Z,{children:null==e?void 0:e.name}),(0,n.jsx)(d.Z,{children:(0,n.jsxs)(v.Z,{children:[" ₹",null==e?void 0:e.price]})}),(0,n.jsx)(d.Z,{children:(0,n.jsxs)(v.Z,{children:[" ₹",null==e?void 0:e.price," "]})})]},null==e?void 0:e.courseId)):(0,n.jsx)(n.Fragment,{})]})]}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,n.jsxs)(j,{variant:"contained",onClick:()=>{e.push({pathname:"/projects",query:{pattern:"Buy Project"}},"/projects")},className:"bg-[#12213d]",children:[r?"loading...":"Add Course",(0,n.jsx)(W.Z,{})]})})]})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:12,md:4,lg:4,children:(0,n.jsx)(Cart_Checkout,{items:S})})]})})})})}},58518:function(e,t,r){"use strict";var n=r(5121),a=r(93345),o=r(93791),s=r(91444),i=r(47e3),l=r(11163),c=r.n(l);n.Z.defaults.baseURL=a.z0,n.Z.interceptors.response.use(e=>e,e=>{if(!e.response||401!==e.response.status&&403!==e.response.status)return Promise.reject(e);(0,o.kT)("token"),s.Am.error("Session Expired Please Login Again"),(0,i.Z)(),c().push("/login")});let getToken=e=>(0,o.ej)("token",e),d={data:null,error:{message:"Need Login"}},successRes=e=>({data:e,error:null}),errorRes=e=>({data:null,error:e}),get=async(e,t,r,a)=>{try{let o=getToken(r);if(o||a){let r=await n.Z.get(e,{headers:{authorization:"Bearer "+o,...t}});return successRes(r.data)}return d}catch(e){return errorRes(e)}},post=async(e,t,r,a,o)=>{try{let s=getToken(a);if(s||o){let a=await n.Z.post(e,t,{headers:{authorization:"Bearer "+s,...r}});return successRes(a.data)}return d}catch(e){return errorRes(e)}},patch=async(e,t,r,a)=>{try{let o=getToken(a);if(o){let a=await n.Z.patch(e,t,{headers:{authorization:"Bearer "+o,...r}});return successRes(a.data)}return d}catch(e){return errorRes(e)}},update=async(e,t,r,a)=>{try{let o=getToken(a);if(o){let a=await n.Z.put(e,t,{headers:{authorization:"Bearer "+o,...r}});return successRes(a.data)}return d}catch(e){return errorRes(e)}},remove=async(e,t,r,a)=>{try{let o=getToken(r);if(o||a){let r=await n.Z.delete(e,{headers:{authorization:"Bearer "+o,...t}});return successRes(r.data)}return d}catch(e){return errorRes(e)}};t.Z={get,post,patch,update,remove}}},function(e){e.O(0,[8717,5675,5615,3615,9417,1664,5720,8288,6705,6963,2747,9774,2888,179],function(){return e(e.s=54476)}),_N_E=e.O()}]);