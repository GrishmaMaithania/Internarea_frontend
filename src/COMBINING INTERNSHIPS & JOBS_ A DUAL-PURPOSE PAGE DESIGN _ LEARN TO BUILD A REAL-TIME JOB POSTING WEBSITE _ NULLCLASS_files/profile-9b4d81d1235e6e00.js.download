(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{31170:function(e,t,i){"use strict";var r=i(64836);t.Z=void 0;var n=r(i(64938)),a=i(85893),o=(0,n.default)([(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,a.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"PhotoCamera");t.Z=o},99813:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return i(39787)}])},49300:function(e,t,i){"use strict";i.d(t,{Z:function(){return components_Button}});var r=i(85893),n=i(98456),a=i(69417),o=i(16829);let l=(0,o.Z)(a.Z)(()=>({borderRadius:"5px",color:"gray",padding:"10.5px 14px",margin:"15px 0",textTransform:"capitalize",fontWeight:"700",fontSize:"1rem",boxSizing:"border-box","&:hover":{boxShadow:"3px 2px 4px #ccc"}}));var components_Button=e=>{let{title:t,type:i="button",isLoading:a,variant:o,onClick:d,disabled:s,style:p}=e;return(0,r.jsxs)(l,{disabled:s,variant:o,fullWidth:!0,type:i,onClick:d,style:p,children:[a&&(0,r.jsx)(n.Z,{size:20,className:"mr-3",color:"warning"}),t]})}},33837:function(e,t,i){"use strict";i.d(t,{BD:function(){return p},Fy:function(){return s},ar:function(){return d},jb:function(){return l}});var r=i(33841),n=i(26705),a=i(16829),o=i(80822);let l=(0,a.Z)(o.Z)(()=>({marginBottom:23})),d=(0,a.Z)(r.Z)(()=>({color:"#14213D",fontSize:"14px",paddingLeft:"4px",marginBottom:6,fontWeight:600})),s=(0,a.Z)(n.Z)(()=>({"& div":{borderRadius:"5px",outline:"none",borderColor:"#ccc"},"& input":{padding:"13px 10px"}})),p=(0,a.Z)("p")(()=>({color:"red",margin:"2px 0px 2px 0px",fontSize:"12px",paddingLeft:4}))},39787:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return profile}});var r=i(85893),n=i(67294),a=i(72747),o=i(58518),l=i(74231),d=i(82175),s=i(78432),p=i(86886),c=i(15861),u=i(26705),x=i(80822),m=i(16829),f=i(49300);let h=(0,m.Z)(x.Z)(()=>({margin:"20px 0px 20px 0px",padding:"20px",borderRadius:"5px",border:"1px solid rgba(224, 224, 224, 1)","& input":{background:"#fff",padding:"13px 10px",borderRadius:"5px",outline:"none",borderColor:"#ccc"}})),g=(0,m.Z)(x.Z)(()=>({minHeight:" 150px",minWidth:"150px",maxWidth:"160px",maxHeight:" 160px",width:"100%",height:"100%","& p":{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"120px",fontWeight:"700",color:"#14213D",border:"2px solid #14213D"},"& img":{maxWidth:"100%",width:"100%",height:"100%",objectFit:"cover"}}));(0,m.Z)(x.Z)(()=>({"& button":{fontSize:"13px",padding:"9px 30px",fontWeight:"700","@media(max-width: 400px)":{padding:"5px"}},"@media(max-width: 899px)":{position:"absolute",top:50,right:35}}));let Z=(0,m.Z)(x.Z)(()=>({display:"flex",justifyContent:"center",padding:"10px",backgroundColor:"#16213e",color:"#fff",width:"100%",maxWidth:"190px",cursor:"pointer",borderRadius:"5px","& p":{color:"#fff",fontWeight:"700",fontSize:"16px"},"& svg":{color:"#fff",marginRight:"10px"}})),j=(0,m.Z)(x.Z)(()=>({width:"100%",paddingLeft:"20px","@media(max-width: 899px)":{paddingLeft:"90px"},"@media(max-width: 599px)":{paddingLeft:"0px"},"& h1":{fontSize:"25px",color:"#000",fontWeight:"700",paddingBottom:"11px"},"& span":{fontSize:"16px",color:"#000",lineHeight:"1.5",paddingBottom:"10px",display:"block",fontWeight:"600",marginBottom:"10px"},"& p":{display:"-webkit-box",fontSize:"14px",color:"#000",textOverflow:"ellipsis",WebkitLineClamp:"5",WebkitBoxOrient:"vertical",overflow:"hidden"}})),b=(0,m.Z)(f.Z)(()=>({display:"flex",justifyContent:"end",marginTop:15})),v=(0,m.Z)(x.Z)(()=>({"& h2":{fontSize:"17px",color:"#000",fontWeight:"700",paddingTop:"15px",paddingBottom:"15px",border:"1px solid rgba(224, 224, 224, 1)",borderRadius:"5px 5px 0px 0px",borderBottom:"0px",width:"100%",maxWidth:"200px",display:"flex",justifyContent:"center",marginTop:"30px",cursor:"pointer"}})),y=(0,m.Z)(x.Z)(()=>({borderBottom:"1px solid rgba(224, 224, 224, 1)",marginBottom:"30px"}));(0,m.Z)(x.Z)(()=>({padding:"0px 0px 0px 20px","@media(max-width: 899px)":{padding:"0px"},"& .MuiGrid-item":{paddingTop:10}}));let w=(0,m.Z)(x.Z)(()=>({margin:"5px",padding:"10px",backgroundImage:"linear-gradient(45deg, #f1f1f1 0 50%, #14213d 50% 100%)"}));var k=i(89809),z=i(31170),R=i(33837);async function getUploadImageUrl(e){return o.Z.post("/upload/signedUrl",e).then(e=>e.data)}var P=i(45007),S=i(41296),_=i(41935);async function Profile_fileUpload(e){let t={filePath:"profile",contentType:e.type,fileSize:e.size},{url:i,fields:r,key:n}=await getUploadImageUrl(t),a=new FormData;Object.entries({...r,file:e}).forEach(e=>{let[t,i]=e;a.append(t,i)});let o=await fetch(i,{method:"POST",body:a});return o.ok?n:(console.error("Upload failed."),"")}var profile=()=>{var e;let t=(0,P.I0)(),{profile:i,error:x}=(0,P.v9)(e=>e.profile),m=(0,P.v9)(e=>e.loggedUser.profile);(0,n.useEffect)(()=>{if(null!==m&&0==Object.keys(i).length){let e=o.Z.get("/profile");t((0,S.In)(e))}},[m]);let f=(0,n.useRef)(null);(0,n.useEffect)(()=>{i&&T&&T({name:i.name,email:i.email})},[i]);let updateProfile=async e=>{if(x)return;let{data:i}=await o.Z.patch("/profile",e);i&&(t((0,S.y)(i)),t((0,_._n)(i)))},uploadImage=async e=>{if(x)return;let t=await Profile_fileUpload(e);if(!t)return;let r={...i,picture:t};updateProfile(r)},B=l.Ry().shape({name:l.Z_().min(2).max(20).required("Name is required"),email:l.Z_().required("Email is required")}),{values:W,handleChange:C,setValues:T,handleSubmit:E}=(0,d.TA)({initialValues:{name:(null==i?void 0:i.name)||"",email:(null==i?void 0:i.email)||""},validationSchema:B,onSubmit:()=>{if(x)return;let e={...i,name:W.name};updateProfile(e)}});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(s.u,{children:(0,r.jsxs)(h,{children:[(0,r.jsx)(w,{children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:12,sm:2,md:2,lg:2,children:(0,r.jsx)(g,{children:!(null==i?void 0:i.picture)||(null==i?void 0:null===(e=i.picture)||void 0===e?void 0:e.includes("https"))?(0,r.jsx)(c.Z,{children:(e=>{if(e)return e[0].toUpperCase()})(null==i?void 0:i.name)}):(0,r.jsx)(k.Z,{imgKey:null==i?void 0:i.picture,alt:""})})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,sm:10,md:10,lg:10,children:(0,r.jsxs)(j,{children:[(0,r.jsx)(c.Z,{variant:"h1",children:null==i?void 0:i.name}),(0,r.jsx)(c.Z,{component:"span",children:null==i?void 0:i.role}),(0,r.jsxs)(Z,{onClick:()=>{f.current&&f.current.click()},children:[(0,r.jsx)(z.Z,{}),(0,r.jsx)(c.Z,{children:"Change Photo"})]}),(0,r.jsx)("input",{ref:f,type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&uploadImage(e.target.files[0])},hidden:!0})]})})]})}),(0,r.jsx)("form",{onSubmit:E,children:(0,r.jsxs)(v,{children:[(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsxs)(p.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,r.jsx)(c.Z,{variant:"h2",children:"User Information"}),(0,r.jsx)(y,{})]}),(0,r.jsxs)(p.ZP,{item:!0,xs:12,sm:6,md:6,lg:6,children:[(0,r.jsx)(R.ar,{children:"Name"}),(0,r.jsx)(u.Z,{id:"name",name:"name",type:"text",fullWidth:!0,value:W.name,onChange:C})]}),(0,r.jsxs)(p.ZP,{item:!0,xs:12,sm:6,md:6,lg:6,children:[(0,r.jsx)(R.ar,{children:"Email "}),(0,r.jsx)(u.Z,{disabled:!0,id:"enterEmail",name:"enterEmail",type:"email",fullWidth:!0,value:W.email})]})]}),(0,r.jsx)(p.ZP,{container:!0,item:!0,xs:12,sm:4,md:2,lg:2,children:(0,r.jsx)(b,{disabled:W.name===(null==i?void 0:i.name),type:"submit",variant:"outlined",title:"Save"})})]})})]})})})})}},58518:function(e,t,i){"use strict";var r=i(5121),n=i(93345),a=i(93791),o=i(91444),l=i(47e3),d=i(11163),s=i.n(d);r.Z.defaults.baseURL=n.z0,r.Z.interceptors.response.use(e=>e,e=>{if(!e.response||401!==e.response.status&&403!==e.response.status)return Promise.reject(e);(0,a.kT)("token"),o.Am.error("Session Expired Please Login Again"),(0,l.Z)(),s().push("/login")});let getToken=e=>(0,a.ej)("token",e),p={data:null,error:{message:"Need Login"}},successRes=e=>({data:e,error:null}),errorRes=e=>({data:null,error:e}),get=async(e,t,i,n)=>{try{let a=getToken(i);if(a||n){let i=await r.Z.get(e,{headers:{authorization:"Bearer "+a,...t}});return successRes(i.data)}return p}catch(e){return errorRes(e)}},post=async(e,t,i,n,a)=>{try{let o=getToken(n);if(o||a){let n=await r.Z.post(e,t,{headers:{authorization:"Bearer "+o,...i}});return successRes(n.data)}return p}catch(e){return errorRes(e)}},patch=async(e,t,i,n)=>{try{let a=getToken(n);if(a){let n=await r.Z.patch(e,t,{headers:{authorization:"Bearer "+a,...i}});return successRes(n.data)}return p}catch(e){return errorRes(e)}},update=async(e,t,i,n)=>{try{let a=getToken(n);if(a){let n=await r.Z.put(e,t,{headers:{authorization:"Bearer "+a,...i}});return successRes(n.data)}return p}catch(e){return errorRes(e)}},remove=async(e,t,i,n)=>{try{let a=getToken(i);if(a||n){let i=await r.Z.delete(e,{headers:{authorization:"Bearer "+a,...t}});return successRes(i.data)}return p}catch(e){return errorRes(e)}};t.Z={get,post,patch,update,remove}}},function(e){e.O(0,[8717,5675,5615,3615,9417,1664,5720,8288,6705,129,2747,9774,2888,179],function(){return e(e.s=99813)}),_N_E=e.O()}]);